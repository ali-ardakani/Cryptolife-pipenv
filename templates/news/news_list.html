{% extends 'base.html' %}

{% block title %}News{% endblock title %}

{% block content %}
</br>

    {% for news in news_cryptocurrency %}

        {% if news.pk %}

            <div class="card mb-3">
                <div class="row no-gutters">
                    <div class="col-md-3">
                        <img src="/media/{{news.img}}" class="card-img">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">
                                <a href="{% url 'news_detail' news.pk %}" style="color:#1d1414;">
                                    {{ news.title }}
                                </a>
                                
                                {% if user.is_authenticated and user.id == news.author.id or perms.news.all or perms.news.change_news or perms.news.delete_news %} 
                                <l style="font-size: 15px;">
                                    (<a href="{% url 'news_edit' news.pk %}">Edit</a> | <a href="{% url 'news_delete' news.pk %}">Delete</a>)
                                </l>
                                {% endif %}
                            </h5>
                            <span class="text-muted">by {{ news.site }} | {{ news.datetime }}</span>
                            <p class="card-text">{{ news.desc|safe|truncatewords:"200" }}</p>
                            <p class="card-text"><small class="text-muted">{{news.date}}</small></p>
                        </div>
                    </div>
                </div>
            </div>

        {% else %}
        <div class="card mb-3">
            <div class="row no-gutters">
                <div class="col-md-3">
                    <img src="{{news.img}}" class="card-img">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title"><a href='https://{{news.link}}' style="color:#1d1414;">{{ news.title }}</a></h5>
                        <span class="text-muted">by {{ news.site }} | {{ news.datetime }}</span>
                        <p class="card-text"></br>{{ news.desc|safe|truncatewords:"200" }}</p>
                        <p class="card-text"><small class="text-muted">{{news.date}}</small></p>
                    </div>
                </div>
            </div>
        </div>

        {% endif %}

    {% endfor %}

{% endblock content %}